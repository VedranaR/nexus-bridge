{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/n19popup.js"],"names":["SiebelAppFacade","N19Helper","settings","consts","SiebelJS","Dependency","pm","isPopup","appletName","Get","view","SiebelApp","S_App","GetActiveView","viewName","GetName","applet","GetAppletMap","isListApplet","GetListOfColumns","appletId","required","lov","appletInputs","document","getElementById","querySelectorAll","i","length","attributes","push","name","nodeValue","AttachNotificationHandler","get","propSet","type","GetProperty","arr","CCFMiscUtil_StringToArray","splice","filter","el","console","log","n19popup","N19popup","instance","GetControl","GetControls","inputName","indexOf","ret","propArray","SetActiveControl","_getControl","controlUiType","value","closePopupApplet","hide","cb","Error","canOpenPopup","SetActiveAppletInternal","_setActiveControl","showPopupApplet","_showPopupApplet","method","ExecuteMethod","controls","appletControls","_returnControls","Object","keys","control","GetUIType","_isSkipControl","controlName","controlInputName","GetInputName","obj","label","GetDisplayName","uiType","_isRequired","boundedPick","IsBoundedPick","staticPick","IsStaticBounded","pickApplet","GetPickApplet","isPostChanges","IsPostChanges","maxSize","GetMaxSize","maxChars","GetMaxChars","fieldName","GetFieldName","isLink","readOnly","GetRenderer","GetColumnHelper","GetActualControlName","staticLOV","_getStaticLOV","GetRadioGroupPropSet","childArray","lovs","reduce","accumulator","currentValue","lic","FieldValue","val","DisplayName","canInvokeMethod","_navigate","index","getNumRows","positionOnRow","promise","Promise","resolve","_newRecord","then","async","_writeRecord","_getValueForControl","OnControlEvent","toString","ps","NewPropertySet","SetProperty","InvokeMethod","sort","_controls","raw","getSelection","isRecord","getRecordSet","controlFieldName","_getControlValue","readonly","rowId","_queryById","_newQuery","ai","scope","mask","selfbusy","args","psOutput","psInput","_getControlInputNameForIdQuery","Clone","CallServerApplet","params","_query","targetViewName","targetAppletName","id","getCurrentRecord","Id","SWECmd","encodeURI","GotoView","insertPending","service","GetService","inPropSet","singleton","Symbol","singletonEnforcer","enforcer","isPopupHidden","resolvePromise","popupAppletN19","assocAppletN19","constructor","N19processNewPopup","ProcessNewPopup","processNewPopup","call","N19viewLoaded","contentUpdater","viewLoaded","isPopupOpen","getPopupApplet","GetPModel","assocApplet","GetPopupApplet","SetShowNewPage","popupPM","GetPopupPM","Setup","activeView","activeApplet","GetActiveApplet","SetActiveAppletBeforePopup","AddProperty","url","GetPageURL","split","Init","isPopupApplet","GetPopupAppletName","isPickApplet","GetPickAppletName","reInitPopup","currPopups","isOpen","GetPopupControl"],"mappings":"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","file":"N19Helper.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// support form and list applets\r\n\r\nimport N19popup from './n19popup';\r\n\r\nSiebelAppFacade.N19Helper = class {\r\n  constructor(settings) {\r\n    this.consts = SiebelJS.Dependency('SiebelApp.Constants');\r\n    this.pm = settings.pm;\r\n    this.isPopup = settings.isPopup;\r\n    this.appletName = this.pm.Get('GetName');\r\n    this.view = SiebelApp.S_App.GetActiveView();\r\n    this.viewName = this.view.GetName();\r\n    this.applet = SiebelApp.S_App.GetActiveView().GetAppletMap()[this.appletName];\r\n    this.isListApplet = typeof this.applet.GetListOfColumns === 'function';\r\n    this.appletId = `s_${this.pm.Get('GetFullId')}_div`;\r\n    this.required = []; // will be empty for list applet\r\n    this.lov = {};\r\n\r\n    // populate the required array for form applets\r\n    if (!this.isListApplet) {\r\n      const appletInputs = document.getElementById(this.appletId).querySelectorAll('input');\r\n      for (let i = 0; i < appletInputs.length; i += 1) {\r\n        if (appletInputs[i].attributes['aria-required']) {\r\n          this.required.push(appletInputs[i].attributes.name.nodeValue);\r\n        }\r\n      }\r\n    }\r\n\r\n    // listener to get dynamic LOVs\r\n    this.pm.AttachNotificationHandler(this.consts.get('SWE_PROP_BC_NOTI_GENERIC'), (propSet) => {\r\n      const type = propSet.GetProperty(this.consts.get('SWE_PROP_NOTI_TYPE'));\r\n      if (type === 'GetQuickPickInfo') {\r\n        const arr = [];\r\n        CCFMiscUtil_StringToArray(propSet.GetProperty(this.consts.get('SWE_PROP_ARGS_ARRAY')), arr);\r\n        if (this.viewName === arr[1] && this.appletName === arr[2]) {\r\n          this.lov[arr[3]] = arr.splice(5).filter(el => el !== '');\r\n        }\r\n      }\r\n    });\r\n\r\n    console.log('N19Helper started....', this.appletName); // eslint-disable-line no-console\r\n\r\n    // get the n19popup singleton instance\r\n    this.n19popup = N19popup.instance;\r\n  }\r\n\r\n  _getControl(name) {\r\n    return this.applet.GetControl(name);\r\n  }\r\n\r\n  _returnControls() {\r\n    if (this.isListApplet) {\r\n      return this.applet.GetListOfColumns();\r\n    }\r\n    return this.applet.GetControls(); // pm.Get('GetControls');\r\n  }\r\n\r\n  // called into the getControls to reduce the amount of the returned controls\r\n  _isSkipControl(type) {\r\n    // https://docs.oracle.com/cd/E74890_01/books/ConfigOpenUI/appendix_a_api002.htm\r\n    // maybe we need to exclude more types\r\n    return (type === this.consts.get('SWE_PST_BUTTON_CTRL'))\r\n      || (type === this.consts.get('SWE_CTRL_LINK'))\r\n      || (type === this.consts.get('SWE_CTRL_PLAINTEXT'))\r\n      || (type === 'null'); // GetUiType returns string\r\n  }\r\n\r\n  _isRequired(inputName) {\r\n    // required is empty for list applets, hopefully for now\r\n    return this.required.indexOf(inputName) > -1;\r\n  }\r\n\r\n  _getStaticLOV(arr) {\r\n    const ret = [];\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      ret.push(arr[i].propArray);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  _setActiveControl(name) {\r\n    return this.applet.SetActiveControl(this._getControl(name));\r\n  }\r\n\r\n  _getValueForControl(controlUiType, value) {\r\n    // TODO: DateTime, numbers, and phones?\r\n    if (this.consts.get('SWE_CTRL_CHECKBOX') === controlUiType) {\r\n      // convert true/false => Y/N\r\n      // do we want to support setting to null\r\n      value = value ? 'Y' : 'N'; // eslint-disable-line no-param-reassign\r\n    }\r\n    return value;\r\n  }\r\n\r\n  closePopupApplet() {\r\n    return this.n19popup.closePopupApplet();\r\n  }\r\n\r\n  _showPopupApplet(name, hide, cb) {\r\n    if (!this.n19popup) { // it is a popup applet\r\n      throw new Error('Openning popup on the popup is not supported now');\r\n    }\r\n    if (!this.n19popup.canOpenPopup()) {\r\n      throw new Error('Cannot open popup!');\r\n      // return false;\r\n    }\r\n    this.view.SetActiveAppletInternal(this.applet); // or SetActiveApplet\r\n    this._setActiveControl(name);\r\n    return this.n19popup.showPopupApplet(hide, cb, this.pm);\r\n  }\r\n\r\n  showMvgApplet(name, hide, cb) {\r\n    return this._showPopupApplet(name, hide, cb);\r\n  }\r\n\r\n  showPickApplet(name, hide, cb) {\r\n    return this._showPopupApplet(name, hide, cb);\r\n  }\r\n\r\n  canInvokeMethod(method) {\r\n    return this.pm.ExecuteMethod('CanInvokeMethod', method);\r\n  }\r\n\r\n  getControls() {\r\n    const controls = {};\r\n    const appletControls = this._returnControls();\r\n    const arr = Object.keys(appletControls);\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      const control = appletControls[arr[i]];\r\n      const controlUiType = control.GetUIType();\r\n      if (this._isSkipControl(controlUiType)) {\r\n        continue; // eslint-disable-line no-continue\r\n      }\r\n      const controlName = control.GetName();\r\n      const controlInputName = control.GetInputName();\r\n      const obj = {\r\n        name: controlName,\r\n        label: control.GetDisplayName(),\r\n        uiType: controlUiType,\r\n        required: this._isRequired(controlInputName),\r\n        boundedPick: control.IsBoundedPick() === '1',\r\n        staticPick: control.IsStaticBounded() === '1',\r\n        pickApplet: control.GetPickApplet(),\r\n        inputName: controlInputName,\r\n        isPostChanges: control.IsPostChanges(),\r\n        maxSize: control.GetMaxSize(),\r\n        maxChars: control.GetMaxChars(),\r\n        fieldName: control.GetFieldName(),\r\n        isLink: this.pm.ExecuteMethod('CanNavigate', controlName),\r\n      };\r\n      if (this.isListApplet) {\r\n        obj.readOnly = !this.pm.ExecuteMethod('CanUpdate',\r\n          this.pm.GetRenderer().GetColumnHelper().GetActualControlName(controlName));\r\n      } else {\r\n        obj.readOnly = !this.pm.ExecuteMethod('CanUpdate', controlName);\r\n      }\r\n      // add values to be displayed in the static pick list\r\n      if (obj.staticPick) {\r\n        obj.staticLOV = this._getStaticLOV(control.GetRadioGroupPropSet().childArray);\r\n        obj.lovs = obj.staticLOV.reduce((accumulator, currentValue) => { // normalized\r\n          accumulator.push({ lic: currentValue.FieldValue, val: currentValue.DisplayName });\r\n          return accumulator;\r\n        }, []);\r\n      }\r\n      controls[controlName] = obj;\r\n    }\r\n    return controls;\r\n  }\r\n\r\n  getRecordSet() {\r\n    return this.pm.Get('GetRecordSet');\r\n  }\r\n\r\n  getRawRecordSet() {\r\n    return this.pm.Get('GetRawRecordSet');\r\n  }\r\n\r\n  getRowListRowCount() {\r\n    // how much applet can display (specified in Siebel Tools) - 10/20\r\n    return this.pm.Get('GetRowListRowCount');\r\n  }\r\n\r\n  getNumRows() {\r\n    // currently visible in applet\r\n    return this.pm.Get('GetNumRows');\r\n  }\r\n\r\n  getSelection() {\r\n    return this.pm.Get('GetSelection');\r\n  }\r\n\r\n  _navigate(method) {\r\n    if (!this.canInvokeMethod(method)) {\r\n      return false;\r\n    }\r\n    const ret = this.pm.ExecuteMethod('InvokeMethod', method, null, false);\r\n    return ret;\r\n  }\r\n\r\n  nextRecord() {\r\n    return this._navigate(this.isListApplet ? 'GotoNext' : 'GotoNextSet');\r\n  }\r\n\r\n  nextRecordSet() {\r\n    if (!this.isListApplet) {\r\n      return false;\r\n    }\r\n    return this._navigate('GotoNextSet');\r\n  }\r\n\r\n  positionOnRow(index) {\r\n    if (this.isListApplet) {\r\n      if (!this.pm.ExecuteMethod('CanInvokeMethod', 'PositionOnRow')) {\r\n        return false;\r\n      }\r\n      if (this.getNumRows() < index + 1) {\r\n        return false;\r\n      }\r\n      return this.pm.ExecuteMethod('HandleRowSelect', index, false, false);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  prevRecord() {\r\n    if (this.isListApplet) {\r\n      return this.positionOnRow(this.pm.Get('GetSelection') - 1);\r\n    }\r\n    return this._navigate('GotoPreviousSet');\r\n  }\r\n\r\n  prevRecordSet() {\r\n    if (!this.isListApplet) {\r\n      return false;\r\n    }\r\n    return this._navigate('GotoPreviousSet');\r\n  }\r\n\r\n  newRecord(cb) {\r\n    const promise = new Promise(resolve => this._newRecord(resolve));\r\n    return typeof cb === 'function' ? promise.then(cb) : promise;\r\n  }\r\n\r\n  _newRecord(cb) {\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'NewRecord', null, {\r\n      async: true,\r\n      cb,\r\n    });\r\n  }\r\n\r\n  newRecordSync() {\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'NewRecord', null, false);\r\n  }\r\n\r\n  writeRecord(cb) {\r\n    const promise = new Promise(resolve => this._writeRecord(resolve));\r\n    return typeof cb === 'function' ? promise.then(cb) : promise;\r\n  }\r\n\r\n  _writeRecord(cb) {\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'WriteRecord', null, {\r\n      async: true,\r\n      cb,\r\n    });\r\n  }\r\n\r\n  writeRecordSync() {\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'WriteRecord', null, false);\r\n  }\r\n\r\n  deleteRecordSync() {\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'DeleteRecord', null, false);\r\n  }\r\n\r\n  setControlValue(name, value) {\r\n    // TODO: If value is null, nothing happens, should we convert null to ''?\r\n    const control = this._getControl(name);\r\n    // TODO: Check if control is found\r\n    value = this._getValueForControl(control.GetUIType(), value); // eslint-disable-line no-param-reassign\r\n    // TODO: should we use SetCellValue for list applets?\r\n    this.pm.OnControlEvent(this.consts.get('PHYEVENT_CONTROL_FOCUS'), control);\r\n    const ret = this.pm.OnControlEvent(this.consts.get('PHYEVENT_CONTROL_BLUR'), control, value);\r\n    if (!ret) {\r\n      console.log(`Value ${value} was not set for ${control.toString()}`); // eslint-disable-line no-console\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  getDynamicLOV(controlName) {\r\n    const control = this._getControl(controlName);\r\n    const controlInputName = control.GetInputName();\r\n    this.lov[controlInputName] = {};\r\n    const ps = SiebelApp.S_App.NewPropertySet();\r\n    ps.SetProperty('SWEField', controlInputName);\r\n    ps.SetProperty('SWEJI', false);\r\n    this.applet.InvokeMethod('GetQuickPickInfo', ps);\r\n    return this.lov[controlInputName];\r\n  }\r\n\r\n  getStaticLOV(controlName) {\r\n    const control = this._getControl(controlName);\r\n    const ret = [];\r\n    if ('1' === control.IsStaticBounded()) {\r\n      const arr = this._getStaticLOV(control.GetRadioGroupPropSet().childArray);\r\n      for (let i = 0; i < arr.length; i += 1) {\r\n        ret.push(arr[i].DisplayName);\r\n      }\r\n      ret.sort();\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  _getControlValue(controlUiType, value) {\r\n    // todo: what about datetime?\r\n    let ret = value;\r\n    if (this.consts.get('SWE_CTRL_CHECKBOX') === controlUiType) {\r\n      // convert Y/N/null -> true/false/null\r\n      // do we need to send null?\r\n      switch (value) {\r\n        case 'Y':\r\n          ret = true;\r\n          break;\r\n        case 'N':\r\n          ret = false;\r\n          break;\r\n        default:\r\n          ret = null;\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  _getFieldToControlsMap(_controls) {\r\n    const ret = {};\r\n    const appletControls = this._returnControls();\r\n    const arr = Object.keys(_controls);\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      const control = appletControls[arr[i]];\r\n      ret[control.GetFieldName()] = {\r\n        name: control.GetName(),\r\n        isPostChanges: control.IsPostChanges(),\r\n        uiType: control.GetUIType(),\r\n      };\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  getCurrentRecord(raw) {\r\n    const index = this.getSelection();\r\n    // todo: check if record exists\r\n    if (raw) {\r\n      return this.pm.Get('GetRawRecordSet')[index];\r\n    }\r\n    return this.pm.Get('GetRecordSet')[index];\r\n  }\r\n\r\n  getCurrentRecordModel(_controls) {\r\n    if (!_controls) {\r\n      return false;\r\n    }\r\n    const arr = Object.keys(_controls);\r\n    const index = this.getSelection();\r\n    const appletControls = this._returnControls();\r\n    _controls.isRecord = index > -1; // eslint-disable-line no-param-reassign\r\n    let obj = {};\r\n    if (_controls.isRecord) {\r\n      obj = this.getRecordSet()[index];\r\n    }\r\n\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      const control = appletControls[arr[i]];\r\n      if (typeof control !== 'undefined') {\r\n        const controlName = control.GetName();\r\n        const controlInputName = control.GetInputName();\r\n        const controlFieldName = control.GetFieldName();\r\n        if (_controls.isRecord) {\r\n          _controls[arr[i]] = { // eslint-disable-line no-param-reassign\r\n            value: this._getControlValue(control.GetUIType(), obj[controlFieldName]),\r\n            readonly: !this.pm.ExecuteMethod('CanUpdate', controlName),\r\n            isLink: this.pm.ExecuteMethod('CanNavigate', controlName),\r\n            label: control.GetDisplayName(),\r\n            isPostChanges: control.IsPostChanges(),\r\n            required: this._isRequired(controlInputName),\r\n            maxSize: control.GetMaxSize(),\r\n          };\r\n        } else { // no record displayed\r\n          _controls[arr[i]] = { // eslint-disable-line no-param-reassign\r\n            value: '',\r\n            readonly: true,\r\n            isLink: false,\r\n            label: control.GetDisplayName(),\r\n            isPostChanges: control.IsPostChanges(),\r\n            required: this._isRequired(controlInputName),\r\n            maxSize: control.GetMaxSize(),\r\n          };\r\n        }\r\n      }\r\n    }\r\n    // todo: do we need to return true or better to return also the object?\r\n    return true;\r\n  }\r\n\r\n  _getControlInputNameForIdQuery() {\r\n    const appletControls = this._returnControls();\r\n    const arr = Object.keys(appletControls);\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      const control = appletControls[arr[i]];\r\n      const controlUiType = control.GetUIType();\r\n      if (!this._isSkipControl(controlUiType)) {\r\n        // skipping also JCheckbox\r\n        // todo: check do we need to skip also date?\r\n        if (controlUiType !== this.consts.get('SWE_CTRL_CHECKBOX')) {\r\n          return control.GetInputName();\r\n        }\r\n      }\r\n    }\r\n    throw new Error('cannot find a control for query');\r\n  }\r\n\r\n  _newQuery() {\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'NewQuery', null, false);\r\n  }\r\n\r\n  queryById(rowId, cb) {\r\n    const promise = new Promise(resolve => this._queryById(rowId, resolve));\r\n    return typeof cb === 'function' ? promise.then(cb) : promise;\r\n  }\r\n\r\n  _queryById(rowId, cb) {\r\n    // maybe check if it is already in query mode / cancel the query\r\n    this._newQuery();\r\n\r\n    const method = 'ExecuteQuery';\r\n    const ai = {\r\n      scope: this,\r\n      async: true,\r\n      mask: false,\r\n      selfbusy: false,\r\n      args: [],\r\n    };\r\n    if (typeof cb === 'function') {\r\n      ai.cb = cb;\r\n    }\r\n\r\n    const psOutput = SiebelApp.S_App.NewPropertySet();\r\n    const psInput = SiebelApp.S_App.NewPropertySet();\r\n    psInput.SetProperty(this._getControlInputNameForIdQuery(), `Id=\"${rowId}\"`);\r\n\r\n    ai.args.push(method);\r\n    ai.args.push(psInput.Clone());\r\n\r\n    return this.applet.CallServerApplet(method, psInput, psOutput, ai);\r\n  }\r\n\r\n  query(params, cb) {\r\n    const promise = new Promise(resolve => this._query(params, resolve));\r\n    return typeof cb === 'function' ? promise.then(cb) : promise;\r\n  }\r\n\r\n  _query(params, cb) {\r\n    // maybe check if it is already in query mode / cancel the query\r\n    this._newQuery();\r\n\r\n    const method = 'ExecuteQuery';\r\n    const ai = {\r\n      scope: this,\r\n      async: true,\r\n      mask: false,\r\n      selfbusy: false,\r\n      args: [],\r\n    };\r\n    if (typeof cb === 'function') {\r\n      ai.cb = cb;\r\n    }\r\n\r\n    const psOutput = SiebelApp.S_App.NewPropertySet();\r\n    const psInput = SiebelApp.S_App.NewPropertySet();\r\n    const arr = Object.keys(params);\r\n    const _controls = this._returnControls();\r\n    for (let i = 0; i < arr.length; i += 1) {\r\n      const control = _controls[arr[i]];\r\n      psInput.SetProperty(control.GetInputName(), this._getValueForControl(control.GetUIType(), params[arr[i]]));\r\n    }\r\n    ai.args.push(method);\r\n    ai.args.push(psInput.Clone());\r\n\r\n    return this.applet.CallServerApplet(method, psInput, psOutput, ai);\r\n  }\r\n\r\n  drilldown(controlName) {\r\n    // todo: check isLink of control?\r\n    // index is not effective, and drilldown anyway happens on last selected record\r\n    if (!this.isListApplet) {\r\n      return false;\r\n    }\r\n    const index = this.getSelection();\r\n    return this.pm.ExecuteMethod('OnDrillDown', controlName, index);\r\n  }\r\n\r\n  gotoView(targetViewName, targetAppletName, id) {\r\n    // todo: get the applet name from the view definition?\r\n    const rowId = typeof id === 'undefined' ? this.getCurrentRecord(true).Id : id;\r\n    let SWECmd = `GotoView&SWEView=${targetViewName}&SWEApplet0=${targetAppletName}`;\r\n    SWECmd += `&SWEBU=1&SWEKeepContext=FALSE&SWERowId0=${rowId}`;\r\n    SWECmd = encodeURI(SWECmd);\r\n    SiebelApp.S_App.GotoView(targetViewName, '', SWECmd, '');\r\n  }\r\n\r\n  _insertPending() {\r\n    return this.pm.Get('GetBusComp').insertPending;\r\n  }\r\n\r\n  requery(name) {\r\n    const service = SiebelApp.S_App.GetService('N19 BS');\r\n    if (service) {\r\n      const inPropSet = SiebelApp.S_App.NewPropertySet();\r\n      inPropSet.SetProperty('name', name);\r\n      service.InvokeMethod('Requery', inPropSet, {});\r\n    }\r\n  }\r\n\r\n  refresh(name) {\r\n    const service = SiebelApp.S_App.GetService('N19 BS');\r\n    if (service) {\r\n      const inPropSet = SiebelApp.S_App.NewPropertySet();\r\n      inPropSet.SetProperty('name', name);\r\n      service.InvokeMethod('Refresh', inPropSet, {});\r\n    }\r\n  }\r\n\r\n  pickRecord() {\r\n    // todo : check CanInokeMethod and/or is it pick\r\n    return this.pm.ExecuteMethod('InvokeMethod', 'PickRecord');\r\n  }\r\n\r\n  deleteRecords(cb) {\r\n    // method is not allowed to delete the primary\r\n    //  in this case it returns \"Method DeleteRecords is not allowed here\" SBL-UIF-00348\r\n    // todo: check canInvokeMethod and/or is it MVG\r\n    const ret = this.pm.ExecuteMethod('InvokeMethod', 'DeleteRecords');\r\n    typeof cb === 'function' && cb();\r\n    return ret;\r\n  }\r\n\r\n  addRecords(cb) {\r\n    // todo: check canInvokeMethod and/or is it MVG. and if we have a record in assoc?\r\n    const ret = this.pm.ExecuteMethod('InvokeMethod', 'AddRecords');\r\n    typeof cb === 'function' && cb();\r\n    return ret;\r\n  }\r\n\r\n  _firstRecord() { // temp method, assumes that no scrolling happened\r\n    if (this.isListApplet) {\r\n      if (this.getSelection() !== 0) {\r\n        return this.positionOnRow(0);\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n};\r\n","const singleton = Symbol('singleton');\r\nconst singletonEnforcer = Symbol('singletonEnforcer');\r\n\r\nclass N19popup {\r\n  static get instance() {\r\n    if (!this[singleton]) {\r\n      this[singleton] = new N19popup(singletonEnforcer);\r\n    }\r\n    return this[singleton];\r\n  }\r\n\r\n  constructor(enforcer) {\r\n    if (enforcer !== singletonEnforcer) {\r\n      throw new Error('Instantiation failed: use Singleton.getInstance() instead of new.');\r\n    }\r\n    this.consts = SiebelJS.Dependency('SiebelApp.Constants');\r\n    this.isPopupHidden = false;\r\n    this.resolvePromise = null;\r\n    this.popupAppletN19 = null;\r\n    this.assocAppletN19 = null;\r\n\r\n    console.log(`${this.constructor.name} started...`); // eslint-disable-line no-console\r\n\r\n    // it will be a singleton, so there is no cleanup\r\n    this.N19processNewPopup = SiebelApp.S_App.ProcessNewPopup; // todo : remove it from SiebelAppFacade\r\n    SiebelApp.S_App.ProcessNewPopup = (ps) => {\r\n      let ret;\r\n      if (this.isPopupHidden) {\r\n        ret = this.processNewPopup(ps);\r\n      } else {\r\n        ret = this.N19processNewPopup.call(SiebelApp.S_App, ps);\r\n      }\r\n      return ret;\r\n    };\r\n\r\n    this.N19viewLoaded = SiebelApp.contentUpdater.viewLoaded;\r\n    SiebelApp.contentUpdater.viewLoaded = (...args) => {\r\n      const ret = this.N19viewLoaded.call(SiebelApp.contentUpdater, ...args);\r\n      if (typeof this.resolvePromise === 'function') {\r\n        const { appletName } = this.isPopupOpen(); // todo: use here the properties set on promiseResolving?\r\n        if (!appletName) {\r\n          throw new Error('Open Applet Name is not found in resolvePromise');\r\n        }\r\n        const applet = this.getPopupApplet(appletName);\r\n        const pm = applet.GetPModel();\r\n        // todo: avoid this circularity\r\n        this.popupAppletN19 = new SiebelAppFacade.N19Helper({ pm, isPopup: true }); // todo : split N19Helper into 2 classes\r\n        const obj = { appletName, popupAppletN19: this.popupAppletN19 };\r\n        // check if we have assoc\r\n        // we assume it is always assoc applet, but what about opening popup on the top of another - not tested it\r\n        const assocApplet = applet.GetPopupApplet();\r\n        if (assocApplet) {\r\n          this.assocAppletN19 = new SiebelAppFacade.N19Helper({\r\n            pm: assocApplet.GetPModel(),\r\n            isPopup: true,\r\n          });\r\n          obj.assocAppletN19 = this.assocAppletN19;\r\n        }\r\n        this.resolvePromise(obj);\r\n        this.resolvePromise = null;\r\n      }\r\n      return ret;\r\n    };\r\n  }\r\n\r\n  canOpenPopup() {\r\n    return typeof this.resolvePromise !== 'function';\r\n  }\r\n\r\n  processNewPopup(ps) {\r\n    SiebelApp.S_App.SetShowNewPage(!0);\r\n    const popupPM = SiebelApp.S_App.GetPopupPM();\r\n\r\n    popupPM.SetProperty('CanProcessLayout', !1);\r\n    popupPM.SetProperty('isPopupPick', false);\r\n    popupPM.SetProperty('isPopupMVGAssoc', false);\r\n    popupPM.SetProperty('isPopupMVGSelected', false);\r\n    popupPM.SetProperty('isPopupAssoc', false);\r\n    popupPM.SetProperty('currPopups', []);\r\n    popupPM.SetProperty('isSIPopup', ps.GetProperty(this.consts.get('SWE_IS_SI_POPUP')));\r\n    popupPM.SetProperty('isPrevPopupVisible', !1);\r\n\r\n    if (!popupPM.GetRenderer()) {\r\n      popupPM.Setup();\r\n    }\r\n\r\n    const activeView = SiebelApp.S_App.GetActiveView();\r\n    if (activeView) {\r\n      const activeApplet = activeView.GetActiveApplet();\r\n      if (activeApplet) {\r\n        activeView.SetActiveAppletBeforePopup(activeApplet);\r\n      }\r\n    }\r\n\r\n    popupPM.AddProperty('state', 'visible'); // todo: we need also to restore the PM\r\n\r\n    let url = ps.GetProperty('URL');\r\n    url = SiebelApp.S_App.GetPageURL() + url.split('start.swe')[1];\r\n    popupPM.SetProperty('url', url);\r\n\r\n    return 'refreshpopup';\r\n  }\r\n\r\n  reInitPopup() {\r\n    const popupPM = SiebelApp.S_App.GetPopupPM();\r\n    popupPM.Init();\r\n    popupPM.Setup();\r\n  }\r\n\r\n  // todo: change the approach, use the class internal variables\r\n  closePopupApplet(applet) {\r\n    // todo : check canInvokeMethod\r\n    let ret;\r\n    if (applet) {\r\n      const isPopupApplet = typeof applet.GetPopupAppletName === 'function';\r\n      const isPickApplet = typeof applet.GetPickAppletName === 'function';\r\n      if (!isPopupApplet && !isPickApplet) {\r\n        throw new Error('This applet is neither pick nor popup');\r\n      }\r\n      ret = applet.GetPModel().ExecuteMethod('InvokeMethod', 'CloseApplet');\r\n    } else {\r\n      // todo: !!! >> change this approach\r\n      ret = this.popupAppletN19.applet.GetPModel().ExecuteMethod('InvokeMethod', 'CloseApplet');\r\n    }\r\n    // it could be better if we don't have a Siebel Applet on the view\r\n    // in this case, we would not need to reInitPopup\r\n    if (this.isPopupHidden) {\r\n      this.reInitPopup();\r\n    }\r\n    this.popupAppletN19 = null;\r\n    this.assocAppletN19 = null;\r\n    return ret;\r\n  }\r\n\r\n  isPopupOpen() { // todo: when we set some properties on resolve, do we need this method now\r\n    // todo: here reuse the properties that set when the Promise resolved\r\n    const currPopups = SiebelApp.S_App.GetPopupPM().Get('currPopups');\r\n    if (0 === currPopups.length) {\r\n      return { isOpen: false };\r\n    }\r\n    if (1 === currPopups.length) {\r\n      return { isOpen: true, appletName: currPopups[0].GetName(), controlName: currPopups[0].GetPopupControl() };\r\n    }\r\n    if (2 === currPopups.length) {\r\n      // this is a shuttle or\r\n      // maybe we opened a popup applet on the top of pick applet - TODO: // test it\r\n      //      test it  - maybe we need to close the several applets\r\n      for (let i = 0; i < currPopups.length; i += 1) {\r\n        if (typeof currPopups[1].GetPopupAppletName === 'function') {\r\n          return { isOpen: true, appletName: currPopups[i].GetName(), controlName: currPopups[i].GetPopupControl() };\r\n        }\r\n      }\r\n      throw new Error('Mvg applet is not found...');\r\n    }\r\n    // todo: test if we can get to here\r\n    //    maybe when we open a new applet on top of the shuttle applet\r\n    throw new Error('should not be here...');\r\n  }\r\n\r\n  getPopupAppletPM(appletName) {\r\n    const applet = this.getPopupApplet(appletName);\r\n    return applet.GetPModel();\r\n  }\r\n\r\n  getPopupApplet(appletName) {\r\n    const applet = SiebelApp.S_App.GetActiveView().GetAppletMap()[appletName];\r\n    if (!applet) {\r\n      throw new Error(`The ${appletName} is not found in applet map`);\r\n    }\r\n    return applet;\r\n  }\r\n\r\n  showPopupApplet(hide, cb, pm) {\r\n    const { isOpen, appletName } = this.isPopupOpen(); // todo: use the properties set on promise resolving?\r\n    if (isOpen) {\r\n      // this code will close the applet even if this applet was originated by another applet\r\n      console.log(`closing ${appletName} in _showPopupApplet...`); // eslint-disable-line no-console\r\n      // maybe do not close if the applet to be opened if the same as already opened?\r\n      this.closePopupApplet(this.getPopupApplet(appletName));\r\n      // todo: check if got it successfully closed?\r\n    }\r\n    this.isPopupHidden = !!hide; // todo: do we need to keep the show the applet\r\n\r\n    pm.ExecuteMethod('InvokeMethod', 'EditPopup', null, false); // seems we can also to call EditField\r\n\r\n    // eslint-disable-next-line no-return-assign\r\n    let ret = new Promise(resolve => this.resolvePromise = resolve); // eslint-disable-line no-param-assign\r\n    if (typeof cb === 'function') {\r\n      ret = ret.then(cb);\r\n    }\r\n    return ret;\r\n  }\r\n}\r\n\r\nexport default N19popup;\r\n"],"sourceRoot":""}