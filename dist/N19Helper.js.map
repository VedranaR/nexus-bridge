{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.js","webpack:///./src/n19baseApplet.js","webpack:///./src/n19popupApplet.js","webpack:///./src/n19popupController.js"],"names":["SiebelAppFacade","N19Helper","settings","console","log","appletName","n19popupController","N19popupController","instance","closePopupApplet","name","hide","cb","Error","canOpenPopup","view","SetActiveAppletInternal","applet","_setActiveControl","showPopupApplet","pm","_showPopupApplet","controlName","isListApplet","index","getSelection","ExecuteMethod","targetViewName","targetAppletName","id","rowId","getCurrentRecord","Id","SWECmd","encodeURI","SiebelApp","S_App","GotoView","popupPM","GetPopupPM","Init","Setup","N19baseApplet","consts","SiebelJS","Dependency","GetActiveView","GetAppletMap","Get","GetListOfColumns","required","lov","token","subscribers","bcId","GetBCId","AttachNotificationHandler","get","propSet","GetProperty","i","length","func","appletId","appletInputs","document","getElementById","querySelectorAll","attributes","push","nodeValue","viewName","GetName","type","arr","CCFMiscUtil_StringToArray","splice","filter","el","GetControl","GetControls","inputName","indexOf","SetActiveControl","_getControl","controlUiType","value","method","controls","appletControls","_returnControls","Object","keys","control","GetUIType","_isSkipControl","controlInputName","GetInputName","obj","label","GetDisplayName","uiType","_isRequired","boundedPick","IsBoundedPick","staticPick","IsStaticBounded","pickApplet","GetPickApplet","isPostChanges","IsPostChanges","maxSize","GetMaxSize","maxChars","GetMaxChars","fieldName","GetFieldName","isLink","readOnly","GetRenderer","GetColumnHelper","GetActualControlName","staticLOV","GetStaticLOV","GetRadioGroupPropSet","childArray","lovs","reduce","accumulator","currentValue","lic","FieldValue","val","DisplayName","canInvokeMethod","ret","_navigate","getNumRows","getRowListRowCount","positionOnRow","promise","Promise","resolve","_newRecord","then","async","_writeRecord","_getValueForControl","OnControlEvent","ps","NewPropertySet","SetProperty","InvokeMethod","sort","_controls","raw","isRecord","getRecordSet","getRawRecordSet","controlFieldName","_getControlValue","readonly","_queryById","_newQuery","ai","scope","mask","selfbusy","args","psOutput","psInput","_getControlInputNameForIdQuery","Clone","CallServerApplet","params","_query","insertPending","ids","fields","reject","_getMVF","entries","psInputs","GetActiveBusObj","join","SetType","_getFieldNameForControl","AddChild","bs","GetService","errcb","methodName","Inputs","psOutputs","boolObject","DatumBoolObject","GetChildByType","GetType","j","map","rec","primary","propArray","SetAsString","GetValue","assign","service","inPropSet","N19popupApplet","constructor","resize","GetSelectedRow","singleton","Symbol","singletonEnforcer","enforcer","isPopupHidden","resolvePromise","popupAppletN19","assocAppletN19","N19processNewPopup","ProcessNewPopup","processNewPopup","call","N19viewLoaded","contentUpdater","viewLoaded","IsPopupOpen","GetPopupApplet","GetPModel","assocApplet","SetShowNewPage","activeView","activeApplet","GetActiveApplet","SetActiveAppletBeforePopup","AddProperty","url","GetPageURL","split","isPopupApplet","GetPopupAppletName","isPickApplet","GetPickAppletName","isOpen","currPopups","GetPopupControl"],"mappings":"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","file":"N19Helper.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import N19baseApplet from './n19baseApplet';\nimport N19popupController from './n19popupController';\n\nSiebelAppFacade.N19Helper = class extends N19baseApplet {\n  constructor(settings) {\n    super(settings);\n    console.log('Nexus main class started....', this.appletName); // eslint-disable-line no-console\n    // get the n19popupController singleton instance\n    this.n19popupController = N19popupController.instance;\n  }\n\n  closePopupApplet() {\n    return this.n19popupController.closePopupApplet();\n  }\n\n  _showPopupApplet(name, hide, cb) {\n    if (!this.n19popupController) {\n      // it is a popup applet\n      throw new Error('Openning popup on the popup is not supported now');\n    }\n    if (!this.n19popupController.canOpenPopup()) {\n      throw new Error('Cannot open popup!');\n      // return false;\n    }\n    this.view.SetActiveAppletInternal(this.applet); // or SetActiveApplet\n    this._setActiveControl(name);\n    return this.n19popupController.showPopupApplet(hide, cb, this.pm);\n  }\n\n  showMvgApplet(name, hide, cb) {\n    return this._showPopupApplet(name, hide, cb);\n  }\n\n  showPickApplet(name, hide, cb) {\n    return this._showPopupApplet(name, hide, cb);\n  }\n\n  drilldown(controlName) {\n    // todo: check isLink of control?\n    // index is not effective, and drilldown anyway happens on last selected record\n    if (!this.isListApplet) {\n      return false;\n    }\n    const index = this.getSelection();\n    return this.pm.ExecuteMethod('OnDrillDown', controlName, index);\n  }\n\n  gotoView(targetViewName, targetAppletName, id) {\n    // todo: get the applet name from the view definition?\n    const rowId = typeof id === 'undefined' ? this.getCurrentRecord(true).Id : id;\n    let SWECmd = `GotoView&SWEView=${targetViewName}&SWEApplet0=${targetAppletName}`;\n    SWECmd += `&SWEBU=1&SWEKeepContext=FALSE&SWERowId0=${rowId}`;\n    SWECmd = encodeURI(SWECmd);\n    SiebelApp.S_App.GotoView(targetViewName, '', SWECmd, '');\n  }\n\n  static ReInitPopup() {\n    const popupPM = SiebelApp.S_App.GetPopupPM();\n    popupPM.Init();\n    popupPM.Setup();\n  }\n};\n","export default class N19baseApplet {\n  constructor(settings) {\n    this.consts = SiebelJS.Dependency('SiebelApp.Constants');\n    this.pm = settings.pm;\n    this.view = SiebelApp.S_App.GetActiveView();\n    this.applet = this.view.GetAppletMap()[this.pm.Get('GetName')];\n    this.isListApplet = typeof this.applet.GetListOfColumns === 'function';\n    this.required = []; // will be empty for the list applet\n    this.lov = {};\n\n    this.token = 0;\n    this.subscribers = [];\n    const bcId = this.applet.GetBCId();\n    this.pm.AttachNotificationHandler(this.consts.get('SWE_PROP_BC_NOTI_END'), (propSet) => {\n      if (bcId === propSet.GetProperty('bc')) {\n        for (let i = 0; i < this.subscribers.length; i += 1) {\n          // we assume that the function does not throw an error\n          this.subscribers[i].func();\n        }\n      }\n    });\n\n    // populate the required array for form applets\n    if (!this.isListApplet) {\n      const appletId = `s_${this.pm.Get('GetFullId')}_div`;\n      const appletInputs = document.getElementById(appletId).querySelectorAll('input');\n      for (let i = 0; i < appletInputs.length; i += 1) {\n        if (appletInputs[i].attributes['aria-required']) {\n          this.required.push(appletInputs[i].attributes.name.nodeValue);\n        }\n      }\n    }\n\n    // listener to get dynamic LOVs\n    const appletName = this.pm.Get('GetName');\n    this.pm.AttachNotificationHandler(this.consts.get('SWE_PROP_BC_NOTI_GENERIC'), (propSet) => {\n      const viewName = SiebelApp.S_App.GetActiveView().GetName();\n      const type = propSet.GetProperty(this.consts.get('SWE_PROP_NOTI_TYPE'));\n      if (type === 'GetQuickPickInfo') {\n        const arr = [];\n        CCFMiscUtil_StringToArray(propSet.GetProperty(this.consts.get('SWE_PROP_ARGS_ARRAY')), arr);\n        if (viewName === arr[1] && appletName === arr[2]) {\n          this.lov[arr[3]] = arr.splice(5).filter(el => el !== '');\n        }\n      }\n    });\n  }\n\n  subscribe(func) {\n    if (typeof func !== 'function') {\n      throw new Error('func is not a function');\n    }\n    this.token += 1;\n    this.subscribers.push({ token: this.token, func });\n    return this.token;\n  }\n\n  unsubscribe(token) {\n    for (let i = 0; i < this.subscribers.length; i += 1) {\n      if (token === this.subscribers[i].token) {\n        return this.subscribers.splice(i, 1);\n      }\n    }\n    return false;\n  }\n\n  _getControl(name) {\n    return this.applet.GetControl(name);\n  }\n\n  _returnControls() {\n    if (this.isListApplet) {\n      return this.applet.GetListOfColumns(); // pm.Get('GetListOfColumns')\n    }\n    return this.applet.GetControls(); // pm.Get('GetControls');\n  }\n\n  // called into the getControls to reduce the amount of the returned controls\n  _isSkipControl(type) {\n    // https://docs.oracle.com/cd/E74890_01/books/ConfigOpenUI/appendix_a_api002.htm\n    // maybe we need to exclude more types\n    return (type === this.consts.get('SWE_PST_BUTTON_CTRL'))\n      || (type === this.consts.get('SWE_CTRL_LINK'))\n      || (type === this.consts.get('SWE_CTRL_PLAINTEXT'))\n      || (type === 'null'); // GetUiType returns string\n  }\n\n  _isRequired(inputName) {\n    // required is empty for list applets, hopefully for now\n    return this.required.indexOf(inputName) > -1;\n  }\n\n  static GetStaticLOV(arr) {\n    const ret = [];\n    for (let i = 0; i < arr.length; i += 1) {\n      ret.push(arr[i].propArray);\n    }\n    return ret;\n  }\n\n  _setActiveControl(name) {\n    return this.applet.SetActiveControl(this._getControl(name));\n  }\n\n  _getValueForControl(controlUiType, value) {\n    // TODO: DateTime, numbers, and phones?\n    if (this.consts.get('SWE_CTRL_CHECKBOX') === controlUiType) {\n      // convert true/false => Y/N\n      // do we want to support setting to null\n      value = value ? 'Y' : 'N'; // eslint-disable-line no-param-reassign\n    }\n    return value;\n  }\n\n  canInvokeMethod(method) {\n    return this.pm.ExecuteMethod('CanInvokeMethod', method);\n  }\n\n  getControls() {\n    const controls = {};\n    const appletControls = this._returnControls();\n    const arr = Object.keys(appletControls);\n    for (let i = 0; i < arr.length; i += 1) {\n      const control = appletControls[arr[i]];\n      const controlUiType = control.GetUIType();\n      if (this._isSkipControl(controlUiType)) {\n        continue; // eslint-disable-line no-continue\n      }\n      const controlName = control.GetName();\n      const controlInputName = control.GetInputName();\n      const obj = {\n        name: controlName,\n        label: control.GetDisplayName(),\n        uiType: controlUiType,\n        required: this._isRequired(controlInputName),\n        boundedPick: control.IsBoundedPick() === '1',\n        staticPick: control.IsStaticBounded() === '1',\n        pickApplet: control.GetPickApplet(),\n        inputName: controlInputName,\n        isPostChanges: control.IsPostChanges(),\n        maxSize: control.GetMaxSize(),\n        maxChars: control.GetMaxChars(),\n        fieldName: control.GetFieldName(),\n        isLink: this.pm.ExecuteMethod('CanNavigate', controlName),\n      };\n      if (this.isListApplet) {\n        obj.readOnly = !this.pm.ExecuteMethod('CanUpdate',\n          this.pm.GetRenderer().GetColumnHelper().GetActualControlName(controlName));\n      } else {\n        obj.readOnly = !this.pm.ExecuteMethod('CanUpdate', controlName);\n      }\n      // add values to be displayed in the static pick list\n      if (obj.staticPick) {\n        obj.staticLOV = N19baseApplet.GetStaticLOV(control.GetRadioGroupPropSet().childArray);\n        obj.lovs = obj.staticLOV.reduce((accumulator, currentValue) => { // normalized\n          accumulator.push({ lic: currentValue.FieldValue, val: currentValue.DisplayName });\n          return accumulator;\n        }, []);\n      }\n      controls[controlName] = obj;\n    }\n    return controls;\n  }\n\n  getRecordSet() {\n    return this.pm.Get('GetRecordSet');\n  }\n\n  getRawRecordSet() {\n    return this.pm.Get('GetRawRecordSet');\n  }\n\n  getRowListRowCount() {\n    // how much applet can display (specified in Siebel Tools) - 10/20\n    return this.pm.Get('GetRowListRowCount');\n  }\n\n  getNumRows() {\n    // currently fetched from server?\n    return this.pm.Get('GetNumRows');\n  }\n\n  getSelection() {\n    return this.pm.Get('GetSelection');\n  }\n\n  _navigate(method) {\n    if (!this.canInvokeMethod(method)) {\n      return false;\n    }\n    const ret = this.pm.ExecuteMethod('InvokeMethod', method, null, false);\n    return ret;\n  }\n\n  nextRecord() {\n    return this._navigate(this.isListApplet ? 'GotoNext' : 'GotoNextSet');\n  }\n\n  nextRecordSet() {\n    if (!this.isListApplet) {\n      return false;\n    }\n    return this._navigate('GotoNextSet');\n  }\n\n  positionOnRow(index) {\n    if (this.isListApplet) {\n      if (!this.pm.ExecuteMethod('CanInvokeMethod', 'PositionOnRow')) {\n        return false;\n      }\n      if (index < 0) {\n        return false;\n      }\n      if (this.getNumRows() < index + 1) {\n        return false;\n      }\n      if (this.getRowListRowCount() < index + 1) {\n        return false;\n      }\n      // todo : if we got to this point\n      //  should we check applet.GetActiveControl (applet.prototype.InvokeMethod)\n      //  and nullify it if active?\n      return this.pm.ExecuteMethod('HandleRowSelect', index, false, false);\n    }\n    return false;\n  }\n\n  prevRecord() {\n    if (this.isListApplet) {\n      return this.positionOnRow(this.pm.Get('GetSelection') - 1);\n    }\n    return this._navigate('GotoPreviousSet');\n  }\n\n  prevRecordSet() {\n    if (!this.isListApplet) {\n      return false;\n    }\n    return this._navigate('GotoPreviousSet');\n  }\n\n  newRecord(cb) {\n    const promise = new Promise(resolve => this._newRecord(resolve));\n    return typeof cb === 'function' ? promise.then(cb) : promise;\n  }\n\n  _newRecord(cb) {\n    return this.pm.ExecuteMethod('InvokeMethod', 'NewRecord', null, {\n      async: true,\n      cb,\n    });\n  }\n\n  newRecordSync() {\n    return this.pm.ExecuteMethod('InvokeMethod', 'NewRecord', null, false);\n  }\n\n  writeRecord(cb) {\n    const promise = new Promise(resolve => this._writeRecord(resolve));\n    return typeof cb === 'function' ? promise.then(cb) : promise;\n  }\n\n  _writeRecord(cb) {\n    return this.pm.ExecuteMethod('InvokeMethod', 'WriteRecord', null, {\n      async: true,\n      cb,\n    });\n  }\n\n  writeRecordSync() {\n    return this.pm.ExecuteMethod('InvokeMethod', 'WriteRecord', null, false);\n  }\n\n  deleteRecordSync() {\n    return this.pm.ExecuteMethod('InvokeMethod', 'DeleteRecord', null, false);\n  }\n\n  setControlValue(name, value) {\n    // TODO: If value is null, nothing happens, should we convert null to ''?\n    const control = this._getControl(name);\n    // TODO: Check if control is found\n    value = this._getValueForControl(control.GetUIType(), value); // eslint-disable-line no-param-reassign\n    // TODO: should we use SetCellValue for list applets?\n    this.pm.OnControlEvent(this.consts.get('PHYEVENT_CONTROL_FOCUS'), control);\n    const ret = this.pm.OnControlEvent(this.consts.get('PHYEVENT_CONTROL_BLUR'), control, value);\n    if (!ret) {\n      console.log(`Value ${value} was not set for ${control.GetName()}`); // eslint-disable-line no-console\n    }\n    return ret;\n  }\n\n  getDynamicLOV(controlName) {\n    const control = this._getControl(controlName);\n    const controlInputName = control.GetInputName();\n    this.lov[controlInputName] = {};\n    const ps = SiebelApp.S_App.NewPropertySet();\n    ps.SetProperty('SWEField', controlInputName);\n    ps.SetProperty('SWEJI', false);\n    this.applet.SetActiveControl(null); // to preve UpdatePick\n    this.applet.InvokeMethod('GetQuickPickInfo', ps);\n    return this.lov[controlInputName];\n  }\n\n  getStaticLOV(controlName) {\n    const control = this._getControl(controlName);\n    const ret = [];\n    if ('1' === control.IsStaticBounded()) {\n      const arr = N19baseApplet.GetStaticLOV(control.GetRadioGroupPropSet().childArray);\n      for (let i = 0; i < arr.length; i += 1) {\n        ret.push(arr[i].DisplayName);\n      }\n      ret.sort();\n    }\n    return ret;\n  }\n\n  _getControlValue(controlUiType, value) {\n    // todo: what about datetime?\n    let ret = value;\n    if (this.consts.get('SWE_CTRL_CHECKBOX') === controlUiType) {\n      // convert Y/N/null -> true/false/null\n      // do we need to send null?\n      switch (value) {\n        case 'Y':\n          ret = true;\n          break;\n        case 'N':\n          ret = false;\n          break;\n        default:\n          ret = null;\n      }\n    }\n    return ret;\n  }\n\n  _getFieldToControlMap(_controls) {\n    const ret = {};\n    const appletControls = this._returnControls();\n    const arr = Object.keys(_controls);\n    for (let i = 0; i < arr.length; i += 1) {\n      const control = appletControls[arr[i]];\n      ret[control.GetFieldName()] = {\n        name: control.GetName(),\n        isPostChanges: control.IsPostChanges(),\n        uiType: control.GetUIType(),\n      };\n    }\n    return ret;\n  }\n\n  getCurrentRecord(raw) {\n    const index = this.getSelection();\n    // todo: check if record exists\n    if (raw) {\n      return this.pm.Get('GetRawRecordSet')[index];\n    }\n    return this.pm.Get('GetRecordSet')[index];\n  }\n\n  getCurrentRecordModel(_controls) {\n    if (!_controls) {\n      return false;\n    }\n    const arr = Object.keys(_controls);\n    const index = this.getSelection();\n    const appletControls = this._returnControls();\n    _controls.isRecord = index > -1; // eslint-disable-line no-param-reassign\n    let obj = {};\n    if (_controls.isRecord) {\n      obj = this.getRecordSet()[index];\n      _controls.id = this.getRawRecordSet()[index].Id;// eslint-disable-line no-param-reassign\n    }\n\n    for (let i = 0; i < arr.length; i += 1) {\n      const control = appletControls[arr[i]];\n      if (typeof control !== 'undefined') {\n        const controlName = control.GetName();\n        const controlInputName = control.GetInputName();\n        const controlFieldName = control.GetFieldName();\n        if (_controls.isRecord) {\n          _controls[arr[i]] = { // eslint-disable-line no-param-reassign\n            value: this._getControlValue(control.GetUIType(), obj[controlFieldName]),\n            readonly: !this.pm.ExecuteMethod('CanUpdate', controlName),\n            isLink: this.pm.ExecuteMethod('CanNavigate', controlName),\n            label: control.GetDisplayName(),\n            isPostChanges: control.IsPostChanges(),\n            required: this._isRequired(controlInputName),\n            maxSize: control.GetMaxSize(),\n          };\n        } else { // no record displayed\n          _controls[arr[i]] = { // eslint-disable-line no-param-reassign\n            value: '',\n            readonly: true,\n            isLink: false,\n            label: control.GetDisplayName(),\n            isPostChanges: control.IsPostChanges(),\n            required: this._isRequired(controlInputName),\n            maxSize: control.GetMaxSize(),\n          };\n        }\n      }\n    }\n    // todo: do we need to return true or better to return also the object?\n    return true;\n  }\n\n  _getControlInputNameForIdQuery() {\n    const appletControls = this._returnControls();\n    const arr = Object.keys(appletControls);\n    for (let i = 0; i < arr.length; i += 1) {\n      const control = appletControls[arr[i]];\n      const controlUiType = control.GetUIType();\n      if (!this._isSkipControl(controlUiType)) {\n        // skipping also JCheckbox\n        // todo: check do we need to skip also date?\n        if (controlUiType !== this.consts.get('SWE_CTRL_CHECKBOX')) {\n          return control.GetInputName();\n        }\n      }\n    }\n    throw new Error('cannot find a control for query');\n  }\n\n  _newQuery() {\n    return this.pm.ExecuteMethod('InvokeMethod', 'NewQuery', null, false);\n  }\n\n  queryById(rowId, cb) {\n    const promise = new Promise(resolve => this._queryById(rowId, resolve));\n    const ret = promise.then(() => this.getRecordSet().length);\n    return typeof cb === 'function' ? ret.then(cb) : ret;\n  }\n\n  _queryById(rowId, cb) {\n    // maybe check if it is already in query mode / cancel the query\n    this._newQuery();\n\n    const method = 'ExecuteQuery';\n    const ai = {\n      scope: this,\n      async: true,\n      mask: false,\n      selfbusy: false,\n      args: [],\n    };\n    if (typeof cb === 'function') {\n      ai.cb = cb;\n    }\n\n    const psOutput = SiebelApp.S_App.NewPropertySet();\n    const psInput = SiebelApp.S_App.NewPropertySet();\n    psInput.SetProperty(this._getControlInputNameForIdQuery(), `Id=\"${rowId}\"`);\n\n    ai.args.push(method);\n    ai.args.push(psInput.Clone());\n\n    return this.applet.CallServerApplet(method, psInput, psOutput, ai);\n  }\n\n  query(params, cb) {\n    const promise = new Promise(resolve => this._query(params, resolve));\n    const ret = promise.then(() => this.getRecordSet().length);\n    return typeof cb === 'function' ? ret.then(cb) : ret;\n  }\n\n  _query(params, cb) {\n    // maybe check if it is already in query mode / cancel the query\n    this._newQuery();\n\n    const method = 'ExecuteQuery';\n    const ai = {\n      scope: this,\n      async: true,\n      mask: false,\n      selfbusy: false,\n      args: [],\n    };\n    if (typeof cb === 'function') {\n      ai.cb = cb;\n    }\n\n    const psOutput = SiebelApp.S_App.NewPropertySet();\n    const psInput = SiebelApp.S_App.NewPropertySet();\n    const arr = Object.keys(params);\n    const _controls = this._returnControls();\n    for (let i = 0; i < arr.length; i += 1) {\n      const control = _controls[arr[i]];\n      psInput.SetProperty(control.GetInputName(), this._getValueForControl(control.GetUIType(), params[arr[i]]));\n    }\n    ai.args.push(method);\n    ai.args.push(psInput.Clone());\n\n    return this.applet.CallServerApplet(method, psInput, psOutput, ai);\n  }\n\n  _insertPending() {\n    return this.pm.Get('GetBusComp').insertPending;\n  }\n\n  static Requery(name) {\n    const service = SiebelApp.S_App.GetService('N19 BS');\n    if (service) {\n      const inPropSet = SiebelApp.S_App.NewPropertySet();\n      inPropSet.SetProperty('name', name);\n      service.InvokeMethod('Requery', inPropSet, {});\n    }\n  }\n\n  static Refresh(name) {\n    const service = SiebelApp.S_App.GetService('N19 BS');\n    if (service) {\n      const inPropSet = SiebelApp.S_App.NewPropertySet();\n      inPropSet.SetProperty('name', name);\n      service.InvokeMethod('Refresh', inPropSet, {});\n    }\n  }\n\n  getMVF(ids, fields) {\n    return new Promise((resolve, reject) => this._getMVF(ids, fields, resolve, reject));\n  }\n\n  _getFieldNameForControl(controlName) {\n    const control = this._getControl(controlName);\n    // if not found, the input value is returned\n    if (control) {\n      return control.GetFieldName();\n    }\n    return controlName;\n  }\n\n  _getMVF(ids, fields, resolve, reject) {\n    const arr = Object.entries(fields);\n    const psInputs = SiebelApp.S_App.NewPropertySet();\n    psInputs.SetProperty('BO', SiebelApp.S_App.GetActiveBusObj().GetName());\n    psInputs.SetProperty('BC', this.pm.Get('GetBusComp').GetName());\n    psInputs.SetProperty('ID', ids.join(','));\n    for (let i = 0; i < arr.length; i += 1) {\n      const ps = SiebelApp.S_App.NewPropertySet();\n      ps.SetType(this._getFieldNameForControl(arr[i][0]));\n      ps.SetProperty('Fields', arr[i][1].join(','));\n      psInputs.AddChild(ps.Clone());\n    }\n    const bs = SiebelApp.S_App.GetService('N19 BS');\n    const ai = {\n      async: true,\n      selfbusy: true,\n      scope: this,\n      errcb: () => reject(),\n      cb: (methodName, Inputs, psOutputs) => {\n        const boolObject = new SiebelApp.S_App.DatumBoolObject();\n        const { childArray } = psOutputs.GetChildByType('ResultSet');\n        const ret = {};\n        for (let i = 0; i < childArray.length; i += 1) {\n          ret[childArray[i].GetType()] = {};\n          for (let j = 0; j < childArray[i].childArray.length; j += 1) {\n            const el = childArray[i].childArray[j];\n            ret[childArray[i].GetType()][el.GetType()] = el.childArray.map((rec) => {\n              const primary = rec.propArray['SSA Primary Field'];\n              boolObject.SetAsString(primary);\n              rec.propArray['SSA Primary Field'] = boolObject.GetValue(); // eslint-disable-line no-param-reassign\n              return Object.assign({}, rec.propArray);\n            });\n          }\n        }\n        resolve(ret);\n      },\n    };\n    return bs.InvokeMethod('ReturnMVGFields', psInputs, ai);\n  }\n}\n","import N19baseApplet from './n19baseApplet';\n\nexport default class N19popupApplet extends N19baseApplet {\n  constructor(settings) {\n    super(settings);\n    console.log(`${this.constructor.name} started...`); // eslint-disable-line no-console\n\n    if (this.isListApplet) {\n      this.pm.GetRenderer().resize = () => 0;\n      this.pm.GetRenderer().GetSelectedRow = () => 0;\n    }\n  }\n\n  pickRecord() {\n    // todo : check CanInokeMethod and/or is it pick\n    return this.pm.ExecuteMethod('InvokeMethod', 'PickRecord');\n  }\n\n  deleteRecords(cb) {\n    // method is not allowed to delete the primary\n    //  in this case it returns \"Method DeleteRecords is not allowed here\" SBL-UIF-00348\n    // todo: check canInvokeMethod and/or is it MVG\n    const ret = this.pm.ExecuteMethod('InvokeMethod', 'DeleteRecords');\n    if (typeof cb === 'function') {\n      cb();\n    }\n    return ret;\n  }\n\n  addRecords(cb) {\n    // todo: check canInvokeMethod and/or is it MVG. and if we have a record in assoc?\n    const ret = this.pm.ExecuteMethod('InvokeMethod', 'AddRecords');\n    if (typeof cb === 'function') {\n      cb();\n    }\n    return ret;\n  }\n\n  _firstRecord() { // temp method, assumes that no scrolling happened\n    if (this.isListApplet) {\n      if (this.getSelection() !== 0) {\n        return this.positionOnRow(0);\n      }\n      return true;\n    }\n    return false;\n  }\n}\n","import N19popupApplet from './n19popupApplet';\n\nconst singleton = Symbol('singleton');\nconst singletonEnforcer = Symbol('singletonEnforcer');\n\nexport default class N19popupController {\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new N19popupController(singletonEnforcer);\n    }\n    return this[singleton];\n  }\n\n  constructor(enforcer) {\n    if (enforcer !== singletonEnforcer) {\n      throw new Error('Instantiation failed: use Singleton.getInstance() instead of new.');\n    }\n    this.consts = SiebelJS.Dependency('SiebelApp.Constants');\n    this.isPopupHidden = false;\n    this.resolvePromise = null;\n    this.popupAppletN19 = null;\n    this.assocAppletN19 = null;\n\n    console.log(`${this.constructor.name} started...`); // eslint-disable-line no-console\n\n    // it will be a singleton, so there is no cleanup\n    this.N19processNewPopup = SiebelApp.S_App.ProcessNewPopup;\n    SiebelApp.S_App.ProcessNewPopup = (ps) => {\n      let ret;\n      if (this.isPopupHidden) {\n        ret = this.processNewPopup(ps);\n      } else {\n        ret = this.N19processNewPopup.call(SiebelApp.S_App, ps);\n      }\n      return ret;\n    };\n\n    this.N19viewLoaded = SiebelApp.contentUpdater.viewLoaded;\n    SiebelApp.contentUpdater.viewLoaded = (...args) => {\n      const ret = this.N19viewLoaded.call(SiebelApp.contentUpdater, ...args);\n      if (typeof this.resolvePromise === 'function') {\n        // todo: use here the properties set on promiseResolving?\n        const { appletName } = N19popupController.IsPopupOpen();\n        if (!appletName) {\n          throw new Error('Open Applet Name is not found in resolvePromise');\n        }\n        const applet = N19popupController.GetPopupApplet(appletName);\n        const pm = applet.GetPModel();\n        // todo: avoid this circularity\n        this.popupAppletN19 = new N19popupApplet({ pm }); // todo : split N19Helper into 2 classes\n        const obj = { appletName, popupAppletN19: this.popupAppletN19 };\n        // check if we have assoc\n        // we assume it is always assoc applet, but what about opening popup on the top of another - not tested it\n        const assocApplet = applet.GetPopupApplet();\n        if (assocApplet) {\n          this.assocAppletN19 = new N19popupApplet({ pm: assocApplet.GetPModel() });\n          obj.assocAppletN19 = this.assocAppletN19;\n        }\n        this.resolvePromise(obj);\n        this.resolvePromise = null;\n      }\n      return ret;\n    };\n  }\n\n  canOpenPopup() {\n    return typeof this.resolvePromise !== 'function';\n  }\n\n  processNewPopup(ps) {\n    SiebelApp.S_App.SetShowNewPage(!0);\n    const popupPM = SiebelApp.S_App.GetPopupPM();\n\n    popupPM.SetProperty('CanProcessLayout', !1);\n    popupPM.SetProperty('isPopupPick', false);\n    popupPM.SetProperty('isPopupMVGAssoc', false);\n    popupPM.SetProperty('isPopupMVGSelected', false);\n    popupPM.SetProperty('isPopupAssoc', false);\n    popupPM.SetProperty('currPopups', []);\n    popupPM.SetProperty('isSIPopup', ps.GetProperty(this.consts.get('SWE_IS_SI_POPUP')));\n    popupPM.SetProperty('isPrevPopupVisible', !1);\n\n    if (!popupPM.GetRenderer()) {\n      popupPM.Setup();\n    }\n\n    const activeView = SiebelApp.S_App.GetActiveView();\n    if (activeView) {\n      const activeApplet = activeView.GetActiveApplet();\n      if (activeApplet) {\n        activeView.SetActiveAppletBeforePopup(activeApplet);\n      }\n    }\n\n    popupPM.AddProperty('state', 'visible'); // todo: we need also to restore the PM\n\n    let url = ps.GetProperty('URL');\n    url = SiebelApp.S_App.GetPageURL() + url.split('start.swe')[1];\n    popupPM.SetProperty('url', url);\n\n    return 'refreshpopup';\n  }\n\n  // static ReInitPopup() {\n  //   const popupPM = SiebelApp.S_App.GetPopupPM();\n  //   popupPM.Init();\n  //   popupPM.Setup();\n  // }\n\n  // todo: change the approach, use the class internal variables\n  closePopupApplet(applet) {\n    // todo : check canInvokeMethod\n    let ret;\n    if (applet) {\n      const isPopupApplet = typeof applet.GetPopupAppletName === 'function';\n      const isPickApplet = typeof applet.GetPickAppletName === 'function';\n      if (!isPopupApplet && !isPickApplet) {\n        throw new Error('This applet is neither pick nor popup');\n      }\n      ret = applet.GetPModel().ExecuteMethod('InvokeMethod', 'CloseApplet');\n    } else {\n      // todo: !!! >> change this approach\n      ret = this.popupAppletN19.applet.GetPModel().ExecuteMethod('InvokeMethod', 'CloseApplet');\n    }\n    // it could be better if we don't have a Siebel Applet on the view\n    // in this case, we would not need to reInitPopup\n    // if (this.isPopupHidden) {\n    //  N19popupController.ReInitPopup();\n    // }\n    this.popupAppletN19 = null;\n    this.assocAppletN19 = null;\n    return ret;\n  }\n\n  static IsPopupOpen() { // todo: when we set some properties on resolve, do we need this method now\n    // todo: here reuse the properties that set when the Promise resolved\n    const currPopups = SiebelApp.S_App.GetPopupPM().Get('currPopups');\n    if (0 === currPopups.length) {\n      return { isOpen: false };\n    }\n    if (1 === currPopups.length) {\n      return { isOpen: true, appletName: currPopups[0].GetName(), controlName: currPopups[0].GetPopupControl() };\n    }\n    if (2 === currPopups.length) {\n      // this is a shuttle or\n      // maybe we opened a popup applet on the top of pick applet - TODO: // test it\n      //      test it  - maybe we need to close the several applets\n      for (let i = 0; i < currPopups.length; i += 1) {\n        if (typeof currPopups[1].GetPopupAppletName === 'function') {\n          return { isOpen: true, appletName: currPopups[i].GetName(), controlName: currPopups[i].GetPopupControl() };\n        }\n      }\n      throw new Error('Mvg applet is not found...');\n    }\n    // todo: test if we can get to here\n    //    maybe when we open a new applet on top of the shuttle applet\n    throw new Error('should not be here...');\n  }\n\n  // static getPopupAppletPM(appletName) {\n  //   const applet = N19popupController.GetPopupApplet(appletName);\n  //   return applet.GetPModel();\n  // }\n\n  static GetPopupApplet(appletName) {\n    const applet = SiebelApp.S_App.GetActiveView().GetAppletMap()[appletName];\n    if (!applet) {\n      throw new Error(`The ${appletName} is not found in applet map`);\n    }\n    return applet;\n  }\n\n  showPopupApplet(hide, cb, pm) {\n    // todo: use the properties set on promise resolving?\n    const { isOpen, appletName } = N19popupController.IsPopupOpen();\n    if (isOpen) {\n      // this code will close the applet even if this applet was originated by another applet\n      console.log(`closing ${appletName} in showPopupApplet...`); // eslint-disable-line no-console\n      // maybe do not close if the applet to be opened if the same as already opened?\n      this.closePopupApplet(N19popupController.GetPopupApplet(appletName));\n      // todo: check if got it successfully closed?\n    }\n    this.isPopupHidden = !!hide; // todo: do we need to keep the show the applet\n\n    pm.ExecuteMethod('InvokeMethod', 'EditPopup', null, false); // seems we can also to call EditField\n\n    let ret = true;\n\n    if (hide) { // we will populate the instances only when applet should be hidden\n      // eslint-disable-next-line no-return-assign\n      ret = new Promise(resolve => this.resolvePromise = resolve); // eslint-disable-line no-param-assign\n      if (typeof cb === 'function') {\n        ret = ret.then(cb);\n      }\n    }\n\n    return ret;\n  }\n}\n"],"sourceRoot":""}